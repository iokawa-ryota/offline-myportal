<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="version" content="v1.0.3" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ãƒªãƒ³ã‚¯é›† & ä¾¿åˆ©ãƒ„ãƒ¼ãƒ«</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family:
          -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
          "Helvetica Neue", Arial, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
      }

      h1 {
        color: white;
        text-align: center;
        margin-bottom: 40px;
        font-size: 2.5rem;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
      }

      .section {
        background: white;
        border-radius: 12px;
        padding: 30px;
        margin-bottom: 30px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      }

      .section h2 {
        color: #667eea;
        margin-bottom: 20px;
        border-bottom: 3px solid #667eea;
        padding-bottom: 10px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .links-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
        gap: 15px;
        margin-top: 20px;
      }

      .link-card {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        padding: 20px;
        border-radius: 8px;
        text-decoration: none;
        color: white;
        transition:
          transform 0.3s,
          box-shadow 0.3s;
        display: block;
        position: relative;
      }

      .link-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
      }

      .link-card h3 {
        margin-bottom: 10px;
        font-size: 1.2rem;
      }

      .link-card p {
        font-size: 0.9rem;
        opacity: 0.9;
      }

      .link-actions {
        position: absolute;
        top: 10px;
        right: 10px;
        display: flex;
        gap: 5px;
      }

      .link-btn {
        background: rgba(255, 255, 255, 0.3);
        border: none;
        color: white;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        cursor: pointer;
        font-size: 0.9rem;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: background 0.2s;
        padding: 0;
      }

      .link-btn:hover {
        background: rgba(255, 255, 255, 0.5);
        transform: none;
        box-shadow: none;
      }

      .todo-input-row {
        display: flex;
        gap: 10px;
        margin-bottom: 15px;
        align-items: center;
      }

      .todo-input-row input {
        margin-bottom: 0;
      }

      .todo-input-row button {
        white-space: nowrap;
        padding: 12px 20px;
      }

      .todo-list {
        list-style: none;
      }

      .todo-title-row {
        justify-content: flex-start !important;
        gap: 12px;
      }

      .todo-history-btn {
        padding: 8px 16px;
        font-size: 0.85rem;
      }

      .todo-item {
        display: flex;
        align-items: center;
        justify-content: flex-start;
        gap: 10px;
        padding: 12px;
        background: #f5f6ff;
        border-radius: 8px;
        margin-bottom: 8px;
        text-align: left;
      }

      .todo-left {
        display: flex;
        align-items: center;
        gap: 10px;
        flex: 1;
        min-width: 0;
      }

      .todo-checkbox {
        width: 22px;
        height: 22px;
        min-width: 22px;
        min-height: 22px;
        margin: 0;
        cursor: pointer;
      }

      .todo-text {
        flex: 1;
        max-width: 1000px;
        overflow-wrap: anywhere;
      }

      .todo-text.done {
        text-decoration: line-through;
        opacity: 0.6;
      }

      .todo-inline-input {
        margin-bottom: 0;
        padding: 8px 10px;
        font-size: 0.95rem;
      }

      .todo-actions {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-left: auto;
      }

      .todo-edit {
        background: #667eea;
        color: white;
        border: none;
        border-radius: 6px;
        padding: 6px 10px;
        cursor: pointer;
        font-size: 0.85rem;
      }

      .todo-edit:hover {
        background: #5a6fd6;
        transform: none;
        box-shadow: none;
      }

      .todo-save {
        background: #2ecc71;
        color: white;
        border: none;
        border-radius: 6px;
        padding: 6px 10px;
        cursor: pointer;
        font-size: 0.85rem;
      }

      .todo-save:hover {
        background: #27ae60;
        transform: none;
        box-shadow: none;
      }

      .todo-cancel {
        background: #999;
        color: white;
        border: none;
        border-radius: 6px;
        padding: 6px 10px;
        cursor: pointer;
        font-size: 0.85rem;
      }

      .todo-cancel:hover {
        background: #777;
        transform: none;
        box-shadow: none;
      }

      .todo-delete {
        background: #e74c3c;
        color: white;
        border: none;
        border-radius: 6px;
        padding: 6px 10px;
        cursor: pointer;
        font-size: 0.85rem;
      }

      .todo-delete:hover {
        background: #c0392b;
        transform: none;
        box-shadow: none;
      }

      .todo-completed-panel {
        margin-top: 12px;
        display: none;
      }

      .todo-completed-panel.show {
        display: block;
      }

      .todo-empty {
        color: #666;
        font-size: 0.9rem;
        padding: 8px 0;
      }

      .add-link-btn {
        background: rgba(102, 126, 234, 0.2);
        border: 2px dashed #667eea;
        color: #667eea;
        padding: 8px 16px;
        border-radius: 6px;
        cursor: pointer;
        font-size: 0.9rem;
        transition: all 0.2s;
      }

      .add-link-btn:hover {
        background: rgba(102, 126, 234, 0.3);
        transform: none;
      }

      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.6);
        z-index: 1000;
        align-items: center;
        justify-content: center;
      }

      .modal.show {
        display: flex;
      }

      .modal-content {
        background: white;
        border-radius: 12px;
        padding: 30px;
        max-width: 500px;
        width: 90%;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
      }

      .modal-content h3 {
        color: #667eea;
        margin-bottom: 20px;
      }

      .modal-buttons {
        display: flex;
        gap: 10px;
        margin-top: 20px;
      }

      .modal-buttons button {
        flex: 1;
      }

      .btn-cancel {
        background: #999;
      }

      .btn-cancel:hover {
        background: #777;
      }

      .btn-delete {
        background: #e74c3c;
      }

      .btn-delete:hover {
        background: #c0392b;
      }

      .tool-section {
        margin-top: 20px;
      }

      .tool-group {
        margin-bottom: 30px;
      }

      .tool-group h3 {
        color: #764ba2;
        margin-bottom: 15px;
      }

      input,
      textarea,
      select {
        width: 100%;
        padding: 12px;
        border: 2px solid #ddd;
        border-radius: 6px;
        font-size: 1rem;
        margin-bottom: 10px;
        font-family: inherit;
      }

      input:focus,
      textarea:focus,
      select:focus {
        outline: none;
        border-color: #667eea;
      }

      button {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 12px 30px;
        border: none;
        border-radius: 6px;
        font-size: 1rem;
        cursor: pointer;
        transition:
          transform 0.2s,
          box-shadow 0.2s;
      }

      button:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
      }

      button:active {
        transform: translateY(0);
      }

      .result {
        margin-top: 15px;
        padding: 15px;
        background: #f5f5f5;
        border-radius: 6px;
        border-left: 4px solid #667eea;
        display: none;
      }

      .result.show {
        display: block;
      }

      .result pre {
        white-space: pre-wrap;
        word-wrap: break-word;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>ğŸ”— ãƒªãƒ³ã‚¯é›† & ä¾¿åˆ©ãƒ„ãƒ¼ãƒ«</h1>

      <div class="section">
        <h2 class="todo-title-row">
          <span>âœ… TODOãƒªã‚¹ãƒˆ</span>
          <button
            class="todo-history-btn"
            id="toggleCompletedBtn"
            onclick="toggleCompletedPanel()"
          >
            å®Œäº†ã—ãŸã‚¿ã‚¹ã‚¯
          </button>
        </h2>
        <div class="todo-input-row">
          <input type="text" id="todoInput" placeholder="ã‚„ã‚‹ã“ã¨ã‚’å…¥åŠ›..." />
          <button onclick="addTodo()">è¿½åŠ </button>
        </div>
        <ul class="todo-list" id="todoList"></ul>
        <div class="todo-completed-panel" id="completedPanel">
          <ul class="todo-list" id="completedTodoList"></ul>
        </div>
      </div>

      <!-- ãƒªãƒ³ã‚¯é›†ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
      <div class="section">
        <h2>
          <span>ğŸ“š ã‚ˆãä½¿ã†ãƒªãƒ³ã‚¯</span>
          <button class="add-link-btn" onclick="showAddLinkModal()">
            ï¼‹ ãƒªãƒ³ã‚¯è¿½åŠ 
          </button>
        </h2>
        <div class="links-grid" id="linksGrid"></div>
      </div>

      <!-- ãƒªãƒ³ã‚¯è¿½åŠ /ç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ« -->
      <div class="modal" id="linkModal">
        <div class="modal-content">
          <h3 id="modalTitle">ãƒªãƒ³ã‚¯ã‚’è¿½åŠ </h3>
          <select id="linkEmoji">
            <option value="ğŸ”—">ğŸ”— ãƒªãƒ³ã‚¯</option>
            <option value="ğŸ”">ğŸ” æ¤œç´¢</option>
            <option value="ğŸ’»">ğŸ’» é–‹ç™º</option>
            <option value="ğŸ“–">ğŸ“– ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</option>
            <option value="â“">â“ Q&A</option>
            <option value="ğŸ¨">ğŸ¨ ãƒ‡ã‚¶ã‚¤ãƒ³</option>
            <option value="ğŸ“±">ğŸ“± ãƒ¢ãƒã‚¤ãƒ«</option>
            <option value="ğŸ› ï¸">ğŸ› ï¸ ãƒ„ãƒ¼ãƒ«</option>
            <option value="ğŸ“Š">ğŸ“Š ãƒ‡ãƒ¼ã‚¿</option>
            <option value="ğŸ®">ğŸ® ã‚²ãƒ¼ãƒ </option>
            <option value="ğŸ“º">ğŸ“º å‹•ç”»</option>
            <option value="ğŸµ">ğŸµ éŸ³æ¥½</option>
            <option value="ğŸ“·">ğŸ“· å†™çœŸ</option>
            <option value="ğŸŒ">ğŸŒ Web</option>
            <option value="ğŸ’¬">ğŸ’¬ ãƒãƒ£ãƒƒãƒˆ</option>
            <option value="ğŸ“§">ğŸ“§ ãƒ¡ãƒ¼ãƒ«</option>
            <option value="ğŸ¢">ğŸ¢ ãƒ“ã‚¸ãƒã‚¹</option>
            <option value="ğŸ“">ğŸ“ æ•™è‚²</option>
            <option value="ğŸ“°">ğŸ“° ãƒ‹ãƒ¥ãƒ¼ã‚¹</option>
            <option value="ğŸ›’">ğŸ›’ ã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°</option>
            <option value="âš™ï¸">âš™ï¸ è¨­å®š</option>
            <option value="ğŸ”’">ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£</option>
            <option value="ğŸ“‚">ğŸ“‚ ãƒ•ã‚¡ã‚¤ãƒ«</option>
            <option value="â˜ï¸">â˜ï¸ ã‚¯ãƒ©ã‚¦ãƒ‰</option>
            <option value="â­">â­ ãŠæ°—ã«å…¥ã‚Š</option>
          </select>
          <input type="text" id="linkTitle" placeholder="ã‚¿ã‚¤ãƒˆãƒ«" />
          <input type="text" id="linkUrl" placeholder="URL" />
          <textarea id="linkDescription" rows="2" placeholder="èª¬æ˜"></textarea>
          <div class="modal-buttons">
            <button class="btn-cancel" onclick="closeModal()">
              ã‚­ãƒ£ãƒ³ã‚»ãƒ«
            </button>
            <button onclick="saveLink()">ä¿å­˜</button>
          </div>
        </div>
      </div>

      <!-- ä¾¿åˆ©ãƒ„ãƒ¼ãƒ«ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
      <div class="section">
        <h2>ğŸ› ï¸ ä¾¿åˆ©ãƒ„ãƒ¼ãƒ«</h2>

        <div class="tool-section">
          <!-- æ–‡å­—æ•°ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ -->
          <div class="tool-group">
            <h3>ğŸ“ æ–‡å­—æ•°ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼</h3>
            <textarea
              id="charCountInput"
              rows="4"
              placeholder="ãƒ†ã‚­ã‚¹ãƒˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„..."
            ></textarea>
            <div class="result show" id="charCountResult">
              æ–‡å­—æ•°: <strong>0</strong> | è¡Œæ•°: <strong>0</strong>
            </div>
          </div>

          <!-- Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰/ãƒ‡ã‚³ãƒ¼ãƒ‰ -->
          <div class="tool-group">
            <h3>ğŸ” Base64 ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰/ãƒ‡ã‚³ãƒ¼ãƒ‰</h3>
            <textarea
              id="base64Input"
              rows="3"
              placeholder="ãƒ†ã‚­ã‚¹ãƒˆã‚’å…¥åŠ›..."
            ></textarea>
            <button onclick="encodeBase64()">ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰</button>
            <button onclick="decodeBase64()">ãƒ‡ã‚³ãƒ¼ãƒ‰</button>
            <div class="result" id="base64Result"></div>
          </div>

          <!-- ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—å¤‰æ› -->
          <div class="tool-group">
            <h3>â° ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—å¤‰æ›</h3>
            <input
              type="number"
              id="timestampInput"
              placeholder="Unix ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ— (ä¾‹: 1638316800)"
            />
            <button onclick="convertTimestamp()">æ—¥æ™‚ã«å¤‰æ›</button>
            <button onclick="getCurrentTimestamp()">ç¾åœ¨æ™‚åˆ»ã‚’å–å¾—</button>
            <div class="result" id="timestampResult"></div>
          </div>

          <!-- URLã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰/ãƒ‡ã‚³ãƒ¼ãƒ‰ -->
          <div class="tool-group">
            <h3>ğŸ”— URL ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰/ãƒ‡ã‚³ãƒ¼ãƒ‰</h3>
            <input type="text" id="urlInput" placeholder="URLã‚’å…¥åŠ›..." />
            <button onclick="encodeURL()">ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰</button>
            <button onclick="decodeURL()">ãƒ‡ã‚³ãƒ¼ãƒ‰</button>
            <div class="result" id="urlResult"></div>
          </div>

          <!-- ã‚«ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰å¤‰æ› -->
          <div class="tool-group">
            <h3>ğŸ¨ ã‚«ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰å¤‰æ›</h3>
            <input type="color" id="colorPicker" value="#667eea" />
            <button onclick="convertColor()">å¤‰æ›</button>
            <div class="result show" id="colorResult">
              HEX: <strong>#667eea</strong> | RGB:
              <strong>rgb(102, 126, 234)</strong>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // ========== ãƒªãƒ³ã‚¯ç®¡ç† ==========
      let links = [
        {
          emoji: "ğŸ”",
          title: "Google",
          url: "https://www.google.com",
          description: "æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³",
        },
        {
          emoji: "ğŸ’»",
          title: "GitHub",
          url: "https://github.com",
          description: "ã‚³ãƒ¼ãƒ‰ç®¡ç†",
        },
        {
          emoji: "â“",
          title: "Stack Overflow",
          url: "https://stackoverflow.com",
          description: "æŠ€è¡“Q&A",
        },
        {
          emoji: "ğŸ“–",
          title: "MDN Web Docs",
          url: "https://developer.mozilla.org",
          description: "WebæŠ€è¡“ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹",
        },
      ];

      let editingIndex = -1;

      let todos = [
        { text: "ä»Šæ—¥ã‚„ã‚‹ã“ã¨ã‚’æ•´ç†ã™ã‚‹", done: false },
        { text: "é‡è¦ãƒªãƒ³ã‚¯ã‚’è¿½åŠ ã™ã‚‹", done: false },
      ];
      let isCompletedPanelVisible = false;
      let editingTodoIndex = -1;

      function loadTodos() {
        const saved = localStorage.getItem("myTodos");
        if (saved) {
          todos = JSON.parse(saved);
        }
        renderTodos();
      }

      function saveTodos() {
        localStorage.setItem("myTodos", JSON.stringify(todos));
      }

      function escapeHtml(value) {
        return value
          .replaceAll("&", "&amp;")
          .replaceAll("<", "&lt;")
          .replaceAll(">", "&gt;")
          .replaceAll('"', "&quot;")
          .replaceAll("'", "&#39;");
      }

      function renderTodos() {
        const list = document.getElementById("todoList");
        const activeTodoItems = todos
          .map((todo, index) => ({ ...todo, index }))
          .filter((todo) => !todo.done);

        if (activeTodoItems.length === 0) {
          list.innerHTML =
            '<li class="todo-empty">æœªå®Œäº†ã®ã‚¿ã‚¹ã‚¯ã¯ã‚ã‚Šã¾ã›ã‚“</li>';
          return;
        }

        list.innerHTML = activeTodoItems
          .map(
            (todo) => `
          <li class="todo-item">
            <div class="todo-left">
              <input
                type="checkbox"
                class="todo-checkbox"
                ${editingTodoIndex === todo.index ? "disabled" : `onchange="toggleTodo(${todo.index})"`}
              />
              ${
                editingTodoIndex === todo.index
                  ? `<input
                      id="todoEditInput-${todo.index}"
                      class="todo-inline-input"
                      type="text"
                      value="${escapeHtml(todo.text)}"
                      onkeydown="handleTodoInlineKeydown(event, ${todo.index})"
                    />`
                  : `<span class="todo-text">${escapeHtml(todo.text)}</span>`
              }
            </div>
            <div class="todo-actions">
              ${
                editingTodoIndex === todo.index
                  ? `<button class="todo-save" onclick="saveTodoEdit(${todo.index})">ä¿å­˜</button>
                     <button class="todo-cancel" onclick="cancelTodoEdit()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>`
                  : `<button class="todo-edit" onclick="startEditTodo(${todo.index})">ä¿®æ­£</button>
                     <button class="todo-delete" onclick="deleteTodo(${todo.index})">å‰Šé™¤</button>`
              }
            </div>
          </li>
        `,
          )
          .join("");
      }

      function renderCompletedTodos() {
        const completedList = document.getElementById("completedTodoList");
        const completedTodoItems = todos
          .map((todo, index) => ({ ...todo, index }))
          .filter((todo) => todo.done);

        if (completedTodoItems.length === 0) {
          completedList.innerHTML =
            '<li class="todo-empty">å®Œäº†æ¸ˆã¿ã‚¿ã‚¹ã‚¯ã¯ã‚ã‚Šã¾ã›ã‚“</li>';
          return;
        }

        completedList.innerHTML = completedTodoItems
          .map(
            (todo) => `
          <li class="todo-item">
            <div class="todo-left">
              <input type="checkbox" class="todo-checkbox" checked disabled />
              ${
                editingTodoIndex === todo.index
                  ? `<input
                      id="todoEditInput-${todo.index}"
                      class="todo-inline-input"
                      type="text"
                      value="${escapeHtml(todo.text)}"
                      onkeydown="handleTodoInlineKeydown(event, ${todo.index})"
                    />`
                  : `<span class="todo-text done">${escapeHtml(todo.text)}</span>`
              }
            </div>
            <div class="todo-actions">
              ${
                editingTodoIndex === todo.index
                  ? `<button class="todo-save" onclick="saveTodoEdit(${todo.index})">ä¿å­˜</button>
                     <button class="todo-cancel" onclick="cancelTodoEdit()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>`
                  : `<button class="todo-edit" onclick="startEditTodo(${todo.index})">ä¿®æ­£</button>
                     <button class="todo-delete" onclick="deleteTodo(${todo.index})">å‰Šé™¤</button>`
              }
            </div>
          </li>
        `,
          )
          .join("");
      }

      function addTodo() {
        const input = document.getElementById("todoInput");
        const text = input.value.trim();

        if (!text) {
          return;
        }

        todos.push({ text, done: false });

        input.value = "";
        saveTodos();
        renderTodos();
        if (isCompletedPanelVisible) {
          renderCompletedTodos();
        }
      }

      function startEditTodo(index) {
        editingTodoIndex = index;
        renderTodos();
        if (isCompletedPanelVisible) {
          renderCompletedTodos();
        }

        const input = document.getElementById(`todoEditInput-${index}`);
        if (input) {
          input.focus();
          input.setSelectionRange(input.value.length, input.value.length);
        }
      }

      function saveTodoEdit(index) {
        const editInput = document.getElementById(`todoEditInput-${index}`);
        if (!editInput) {
          return;
        }

        const text = editInput.value.trim();
        if (!text) {
          return;
        }

        todos[index].text = text;
        editingTodoIndex = -1;
        saveTodos();
        renderTodos();
        if (isCompletedPanelVisible) {
          renderCompletedTodos();
        }
      }

      function cancelTodoEdit() {
        editingTodoIndex = -1;
        renderTodos();
        if (isCompletedPanelVisible) {
          renderCompletedTodos();
        }
      }

      function handleTodoInlineKeydown(event, index) {
        if (event.key === "Enter") {
          event.preventDefault();
          saveTodoEdit(index);
        }
        if (event.key === "Escape") {
          event.preventDefault();
          cancelTodoEdit();
        }
      }

      function toggleTodo(index) {
        if (editingTodoIndex === index) {
          editingTodoIndex = -1;
        }
        todos[index].done = !todos[index].done;
        saveTodos();
        renderTodos();
        renderCompletedTodos();
      }

      function deleteTodo(index) {
        todos.splice(index, 1);
        if (editingTodoIndex === index) {
          editingTodoIndex = -1;
        } else if (editingTodoIndex > index) {
          editingTodoIndex -= 1;
        }
        saveTodos();
        renderTodos();
        renderCompletedTodos();
      }

      function toggleCompletedPanel() {
        const panel = document.getElementById("completedPanel");
        const button = document.getElementById("toggleCompletedBtn");
        isCompletedPanelVisible = !isCompletedPanelVisible;

        if (isCompletedPanelVisible) {
          panel.classList.add("show");
          button.textContent = "å®Œäº†ã—ãŸã‚¿ã‚¹ã‚¯ã‚’é–‰ã˜ã‚‹";
          renderCompletedTodos();
        } else {
          panel.classList.remove("show");
          button.textContent = "å®Œäº†ã—ãŸã‚¿ã‚¹ã‚¯";
        }
      }

      document.getElementById("todoInput").addEventListener("keydown", (e) => {
        if (e.key === "Enter") {
          addTodo();
        }
      });

      // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‹ã‚‰èª­ã¿è¾¼ã¿
      function loadLinks() {
        const saved = localStorage.getItem("myLinks");
        if (saved) {
          links = JSON.parse(saved);
        }
        renderLinks();
      }

      // ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜
      function saveLinks() {
        localStorage.setItem("myLinks", JSON.stringify(links));
      }

      // ãƒªãƒ³ã‚¯ã‚’è¡¨ç¤º
      function renderLinks() {
        const grid = document.getElementById("linksGrid");
        grid.innerHTML = links
          .map(
            (link, index) => `
          <a href="${link.url}" class="link-card" target="_blank">
            <div class="link-actions" onclick="event.preventDefault(); event.stopPropagation();">
              <button class="link-btn" onclick="editLink(${index})" title="ç·¨é›†">âœï¸</button>
              <button class="link-btn" onclick="deleteLink(${index})" title="å‰Šé™¤">ğŸ—‘ï¸</button>
            </div>
            <h3>${link.emoji} ${link.title}</h3>
            <p>${link.description}</p>
          </a>
        `,
          )
          .join("");
      }

      // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‹ãï¼ˆè¿½åŠ ï¼‰
      function showAddLinkModal() {
        editingIndex = -1;
        document.getElementById("modalTitle").textContent = "ãƒªãƒ³ã‚¯ã‚’è¿½åŠ ";
        document.getElementById("linkEmoji").value = "";
        document.getElementById("linkTitle").value = "";
        document.getElementById("linkUrl").value = "";
        document.getElementById("linkDescription").value = "";
        document.getElementById("linkModal").classList.add("show");
      }

      // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‹ãï¼ˆç·¨é›†ï¼‰
      function editLink(index) {
        editingIndex = index;
        const link = links[index];
        document.getElementById("modalTitle").textContent = "ãƒªãƒ³ã‚¯ã‚’ç·¨é›†";
        document.getElementById("linkEmoji").value = link.emoji;
        document.getElementById("linkTitle").value = link.title;
        document.getElementById("linkUrl").value = link.url;
        document.getElementById("linkDescription").value = link.description;
        document.getElementById("linkModal").classList.add("show");
      }

      // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
      function closeModal() {
        document.getElementById("linkModal").classList.remove("show");
      }

      // ãƒªãƒ³ã‚¯ã‚’ä¿å­˜
      function saveLink() {
        const emoji = document.getElementById("linkEmoji").value || "ğŸ”—";
        const title = document.getElementById("linkTitle").value.trim();
        const url = document.getElementById("linkUrl").value.trim();
        const description = document
          .getElementById("linkDescription")
          .value.trim();

        if (!title || !url) {
          alert("ã‚¿ã‚¤ãƒˆãƒ«ã¨URLã¯å¿…é ˆã§ã™");
          return;
        }

        const link = { emoji, title, url, description };

        if (editingIndex >= 0) {
          links[editingIndex] = link;
        } else {
          links.push(link);
        }

        saveLinks();
        renderLinks();
        closeModal();
      }

      // ãƒªãƒ³ã‚¯ã‚’å‰Šé™¤
      function deleteLink(index) {
        if (confirm("ã“ã®ãƒªãƒ³ã‚¯ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ")) {
          links.splice(index, 1);
          saveLinks();
          renderLinks();
        }
      }

      // ãƒ¢ãƒ¼ãƒ€ãƒ«å¤–ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹ï¼ˆmousedownã§ã¯ãªãclickã§åˆ¤å®šï¼‰
      document
        .getElementById("linkModal")
        .addEventListener("mousedown", (e) => {
          if (e.target.id === "linkModal") {
            // ãƒã‚¦ã‚¹ãƒ€ã‚¦ãƒ³ã¨ãƒã‚¦ã‚¹ã‚¢ãƒƒãƒ—ã®ä¸¡æ–¹ãŒèƒŒæ™¯ä¸Šã§ç™ºç”Ÿã—ãŸå ´åˆã®ã¿é–‰ã˜ã‚‹
            const target = e.target;
            document.getElementById("linkModal").addEventListener(
              "mouseup",
              function closeOnMouseUp(upEvent) {
                if (
                  upEvent.target.id === "linkModal" &&
                  target.id === "linkModal"
                ) {
                  closeModal();
                }
                document
                  .getElementById("linkModal")
                  .removeEventListener("mouseup", closeOnMouseUp);
              },
              { once: true },
            );
          }
        });

      // åˆæœŸåŒ–
      loadTodos();
      loadLinks();

      // ========== ä¾¿åˆ©ãƒ„ãƒ¼ãƒ« ==========
      // æ–‡å­—æ•°ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼
      document
        .getElementById("charCountInput")
        .addEventListener("input", function (e) {
          const text = e.target.value;
          const charCount = text.length;
          const lineCount = text.split("\n").length;
          document.getElementById("charCountResult").innerHTML =
            `æ–‡å­—æ•°: <strong>${charCount}</strong> | è¡Œæ•°: <strong>${lineCount}</strong>`;
        });

      // Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰/ãƒ‡ã‚³ãƒ¼ãƒ‰
      function encodeBase64() {
        const input = document.getElementById("base64Input").value;
        try {
          const encoded = btoa(unescape(encodeURIComponent(input)));
          showResult(
            "base64Result",
            `ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰çµæœ:<br><pre>${encoded}</pre>`,
          );
        } catch (e) {
          showResult("base64Result", "ã‚¨ãƒ©ãƒ¼: ç„¡åŠ¹ãªå…¥åŠ›ã§ã™");
        }
      }

      function decodeBase64() {
        const input = document.getElementById("base64Input").value;
        try {
          const decoded = decodeURIComponent(escape(atob(input)));
          showResult("base64Result", `ãƒ‡ã‚³ãƒ¼ãƒ‰çµæœ:<br><pre>${decoded}</pre>`);
        } catch (e) {
          showResult("base64Result", "ã‚¨ãƒ©ãƒ¼: ç„¡åŠ¹ãªBase64æ–‡å­—åˆ—ã§ã™");
        }
      }

      // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—å¤‰æ›
      function convertTimestamp() {
        const timestamp = document.getElementById("timestampInput").value;
        if (!timestamp) {
          showResult("timestampResult", "ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");
          return;
        }
        const date = new Date(parseInt(timestamp) * 1000);
        showResult(
          "timestampResult",
          `æ—¥æ™‚: <strong>${date.toLocaleString("ja-JP")}</strong>`,
        );
      }

      function getCurrentTimestamp() {
        const now = Math.floor(Date.now() / 1000);
        const date = new Date();
        document.getElementById("timestampInput").value = now;
        showResult(
          "timestampResult",
          `ç¾åœ¨ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—: <strong>${now}</strong><br>æ—¥æ™‚: <strong>${date.toLocaleString(
            "ja-JP",
          )}</strong>`,
        );
      }

      // URLã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰/ãƒ‡ã‚³ãƒ¼ãƒ‰
      function encodeURL() {
        const input = document.getElementById("urlInput").value;
        const encoded = encodeURIComponent(input);
        showResult("urlResult", `ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰çµæœ:<br><pre>${encoded}</pre>`);
      }

      function decodeURL() {
        const input = document.getElementById("urlInput").value;
        try {
          const decoded = decodeURIComponent(input);
          showResult("urlResult", `ãƒ‡ã‚³ãƒ¼ãƒ‰çµæœ:<br><pre>${decoded}</pre>`);
        } catch (e) {
          showResult("urlResult", "ã‚¨ãƒ©ãƒ¼: ç„¡åŠ¹ãªURLã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰æ–‡å­—åˆ—ã§ã™");
        }
      }

      // ã‚«ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰å¤‰æ›
      document
        .getElementById("colorPicker")
        .addEventListener("input", convertColor);

      function convertColor() {
        const hex = document.getElementById("colorPicker").value;
        const r = parseInt(hex.substr(1, 2), 16);
        const g = parseInt(hex.substr(3, 2), 16);
        const b = parseInt(hex.substr(5, 2), 16);
        document.getElementById("colorResult").innerHTML =
          `HEX: <strong>${hex.toUpperCase()}</strong> | RGB: <strong>rgb(${r}, ${g}, ${b})</strong>`;
      }

      // çµæœè¡¨ç¤ºãƒ˜ãƒ«ãƒ‘ãƒ¼
      function showResult(id, html) {
        const element = document.getElementById(id);
        element.innerHTML = html;
        element.classList.add("show");
      }
    </script>
  </body>
</html>
